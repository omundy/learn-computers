<!doctype html>
<html lang="en">
<head>

    
    
    

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Learn Computing - data-cleaning</title>

    <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/icons/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/img/icons/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/img/icons/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="../assets/img/icons/favicon_io/site.webmanifest">
    <!-- <link rel="shortcut icon" type="image/x-icon" href="../assets/img/icons/favicon_io/favicon.ico"> -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../assets/css/www-styles.css">

</head>

<body>




<div class="container">
    <div class="row">
        <div class="col-12 col-md-10 offset-md-1">
            <!-- paginate: true -->

<p><a href="../README.md">&lt;</a></p>
<img width="375" src="../assets/img/banner/banner-data-cleaning.png">

<h1 id="data-cleaning">Data Cleaning</h1>
<p>Tips for cleaning data</p>
<p><sup class="small"><a href="../slides/data-cleaning.html">slides</a> | <a href="../topics/data-cleaning.md">markdown</a> </sup></p>
<!--
Presentation comments ...
-->


<hr>
<h3 id="contents">Contents</h3>
<ol>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#about-data-cleaning">About Data Cleaning</a> <code>5 min</code></li>
<li><a href="#remove-formatting">Remove formatting</a> <code>5 min</code></li>
<li><a href="#preserve-tabular-data">Preserve tabular data</a> <code>5 min</code></li>
<li><a href="#type-conversion">Type conversion</a> <code>5 min</code></li>
<li><a href="#find-and-replace-with-regex">Find and replace with RegEx</a> <code>5 min</code></li>
<li><a href="#keep-practicing">Keep practicing</a></li>
<li><a href="#references">References</a></li>
</ol>
<hr>
<h2 id="introduction">Introduction</h2>
<p>Review the following sections and perform the activities on your own or with your group.</p>
<p>Perform the task(s) when you see this ðŸ‘‰  emoji</p>
<details>
<summary>Learning Objectives</summary>

<p>Students who complete the following will be able to:</p>
<ul>
<li>Describe data cleaning and its benefits</li>
<li>Compare data before and after cleaning</li>
<li>List methods for data cleaning</li>
<li>Improve and clean data for visualization or other use</li>
</ul>
</details>

<details>
<summary>Preparation</summary>

<p>Complete the following to prepare for this module</p>
<ul>
<li><a href="command-line-crash-course.md">Command Line Crash Course</a></li>
<li><a href="data-basics.md">Learn Computing: Data Basics</a></li>
</ul>
</details>


<hr>
<h2 id="about-data-cleaning">About Data Cleaning</h2>
<p>Data cleaning is a process that involves</p>
<ol>
<li>Identifying unfinished, unreliable, inaccurate, or non-relevant parts in a dataset, table, or database</li>
<li>Removing or correcting the dirty or inaccurate data</li>
</ol>
<p>Data cleaning can be performed via scripting or interactively with data cleaning tools.</p>
<hr>
<h2 id="remove-whitespace">Remove whitespace</h2>
<p><a href="https://en.wikipedia.org/wiki/Whitespace_character">Whitespace characters</a> (tabs, spaces, line breaks) are essential to make text documents human-readable, but if you have too many they can really clutter up a dataset.</p>
<pre><code class="language-bash">      this  is                      some
             really       dirty
     data       !
</code></pre>
<p>Replacing all the spaces, tabs, and line breaks (&quot;carriage returns&quot;) in the example above by hand would be a lot of work in a big dataset. However, you can use simple find/replace tools in Atom to make short work of this.</p>
<hr>
<p>ðŸ‘‰ <strong>Try it out</strong></p>
<ol>
<li>Copy the text in the example above into Atom</li>
<li>Try to remove the three types of whitespace from the text using <strong>only</strong> the find / replace tools.</li>
</ol>
<details>
<summary>Hint</summary>

<img width="500" src="../assets/img/data-cleaning/find-whitespace.png">

<ul>
<li>Whitespace is invisible, but you can still copy / paste the characters into find / replace.</li>
<li>To replace all the extra spaces, search for two spaces and replace with a single space.</li>
</ul>
</details>




<hr>
<h2 id="remove-formatting">Remove formatting</h2>
<p>When getting data for a project, the goal is almost always to be able to reuse the data somehow. Usually this means pasting into a plain text document (e.g. <code>csv</code> or <code>json</code>), spreadsheet, or database.</p>
<p>Perhaps the simplest way to get data is to copy and paste. If you copy any <a href="https://www.nytimes.com/2021/08/31/technology/facebook-accenture-content-moderation.html">formatted</a> (a.k.a. &quot;rich&quot;) text from the web or a document, then that formatting will be applied if you paste it into a document that supports the formatting.</p>
<p><img width="400" src="../assets/img/data-cleaning/copy-paste.png"> <img width="600" src="../assets/img/data-cleaning/copy-paste-formatting.png"></p>
<hr>
<p>To remove rich text formatting from copied text either</p>
<p><strong>Use plain text</strong>:</p>
<p>Immediately paste the text into a plain text document, then select all and copy the unformatted text.</p>
<p><strong>Use a supported app</strong>:</p>
<p>Edit &gt; Paste without formatting, or (Google Sheets) Edit &gt; Paste special &gt; Paste values only</p>
<hr>
<h2 id="preserve-tabular-data">Preserve tabular data</h2>
<p>Many times you will want to paste tabular data into a spreadsheet to be able to sort or further change the data using the columns. While you can paste <em>tab-separated</em> data and preserve the columns and rows, <em>comma-separated</em> data will not automatically be recognized as tabular. Two options to correct this issue:</p>
<img width="600" src="../assets/img/data-cleaning/find-replace-copy-pasted3.png">



<hr>
<h3 id="option-1-save-as-csv">Option 1: Save as CSV</h3>
<p>If the text is comma-separated...</p>
<ol>
<li>Copy / paste the text into a new plain text file.</li>
<li>Save the file as a <code>.CSV</code></li>
<li>Open the in Excel or Google Sheets.</li>
</ol>
<hr>
<h3 id="option-2-find-and-replace-with-a-tab-character">Option 2: Find and Replace with a tab character</h3>
<ol>
<li>Copy / paste the text into a new plain text file in <a href="https://atom.io/">Atom</a>.</li>
<li>Use Find to search for the delimiter</li>
</ol>
<img width="500" src="../assets/img/data-cleaning/find-replace-tab-before.png">

<ol start="3">
<li>Type a tab character and copy and paste it into the replace field.</li>
</ol>
<p>Copy and paste a tab character into the replace field.</p>
<img width="500" src="../assets/img/data-cleaning/find-replace-tab.png">

<hr>
<ol start="4">
<li>Click Replace All</li>
</ol>
<img width="500" src="../assets/img/data-cleaning/find-replace-tab-after.png">

<ol start="5">
<li>Copy / paste the now <em>tab-delimited</em> data into your spreadsheet, which will recognize that we are pasting tab-separated content and add each field to its own column.</li>
</ol>
<img width="500" src="../assets/img/data-cleaning/find-replace-copy-pasted4.png">



<hr>
<p>ðŸ‘‰ <strong>Try it out</strong> - Try to paste some tabular data from</p>
<ul>
<li><a href="https://machinelearningmastery.com/time-series-datasets-for-machine-learning/">this page</a> into a sheet and preserve the column structure.</li>
<li><a href="https://developers.google.com/adwords/api/docs/appendix/verticals">these advertising categories</a> so that all the tiers are represented in their own columns.</li>
</ul>
<hr>
<h2 id="type-conversion">Type conversion</h2>
<p>Once you import your data into a spreadsheet it will likely be treated as plain text. In order to sort, present, or chart the data you may need to use the spreadsheet application to recognize the data type.</p>
<p>For example, once a column is set as a date format you can select how you wish that date to be displayed:</p>
<p><img width="200" src="../assets/img/data-cleaning/data-type-date1.png"> <img width="200" src="../assets/img/data-cleaning/data-type-date2.png"></p>
<hr>
<h2 id="find-and-replace-with-regex">Find and replace with RegEx</h2>
<p>Sometimes you may need to use something more powerful to clean your data. This example uses Regular Expressions to search for specific instances of text.</p>
<p>ðŸ‘‰ <strong>Try it out</strong></p>
<p>Use RegEx function with find/replace in a text editor to clean these <a href="datasets/nasdaqtraded-20210831.txt">stock symbols</a></p>
<ol>
<li>Select all, copy, and paste them into a new document in Atom.</li>
<li>Searching for all the pipes <code>|</code> shows some of what we do and don&#39;t want.</li>
</ol>
<hr>
<ol start="3">
<li>Enabled Regular Expressions and Case Sensitive in Atom</li>
<li>Search for each of the following<ol>
<li><code>[A-Z]</code> - Any capitalized letters</li>
<li><code>[A-Z]{1,5}</code> - Any capitalized letters, one to five characters long</li>
<li><code>^[A-Z]{1,5}</code> - Any capitalized letters, one to five characters long, at the start of a string</li>
<li><code>(^[A-Z]{1,5})</code> - Wrap this match in a capture group</li>
<li><code>(^[A-Z]{1,5})+(.*)</code> - Add a second group that matches any number of any character</li>
</ol>
</li>
<li>Add to the replace <code>$1</code> to copy the result of the first capture group</li>
</ol>
<hr>
<ol start="6">
<li>And Find All / Replace All</li>
</ol>
<p>We could make these stock symbols into a Javascript array using</p>
<ol>
<li>Find <code>(^[A-Z]{1,5})</code> and Replace: <code>&#39;$1&#39;,</code></li>
<li>Adding <code>const arr = [</code> to the beginning and <code>];</code> to the end</li>
</ol>
<hr>
<h2 id="more-regex-examples">More Regex examples</h2>
<p>Also see this converter: <a href="https://www.convertcsv.com/csv-to-json.htm">https://www.convertcsv.com/csv-to-json.htm</a></p>
<hr>
<h4 id="search-for-a-string">Search for a string</h4>
<p>Replace line 1 with line 2</p>
<pre><code class="language-bash">https://code.jquery.com/jquery-3.5.1.min.js
https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js
</code></pre>
<p>With this find / replace</p>
<pre><code class="language-bash">http(.*)jquery(.*).js
https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js
</code></pre>
<hr>
<h4 id="remove-and-replace-characters">Remove and replace characters</h4>
<p>Replace characters in line 1 with line 2</p>
<pre><code class="language-bash">javascript-1/1-1-variables/
topics/variables/
</code></pre>
<p>With this find / replace</p>
<pre><code class="language-bash">javascript-1/([0-9])-([0-9])-
topics/
</code></pre>
<hr>
<h4 id="remove-and-replace-characters-1">Remove and replace characters</h4>
<p>Remove <code>&quot;&quot;</code> and replace <code>-</code> characters in line 1</p>
<pre><code class="language-bash">&quot;1-03&quot;
1,03
</code></pre>
<p>With this find / replace</p>
<pre><code class="language-bash">&quot;(.*)-(.*)&quot;,
$1, $2,
</code></pre>
<p><a href="../assets/img/data-cleaning/find-regex-date.png" target="_blank"><img width="500" src="../assets/img/data-cleaning/find-regex-date.png"></a></p>
<hr>
<h4 id="swap-the-order">Swap the order</h4>
<p>Change line 1 &gt; line 2</p>
<pre><code class="language-bash">&lt;p&gt;First / Second&lt;/p&gt;
&lt;p&gt;Second | First&lt;/p&gt;
</code></pre>
<p>With this find / replace</p>
<pre><code class="language-bash">&lt;p&gt;(.*) / (.*)&lt;/p&gt;
&lt;p&gt;$2 | $1&lt;/p&gt;
</code></pre>
<hr>
<h4 id="prepare-a-table-for-javascript">Prepare a table for Javascript</h4>
<p>Replace all the tabs</p>
<pre><code class="language-bash">adjective    color    animal
sad    red    dog
furtive    green    cat
cautious    blue    rabbit
happy        rooster
adventurous        gazelle
        aardvark
        sea lion
</code></pre>
<p>With this find / replace (the tab is hidden) and then add additional syntax and copy / paste.</p>
<pre><code class="language-bash">
&#39;, &#39;
</code></pre>
<pre><code class="language-js">let options = {
    adjective: [&#39;sad&#39;, &#39;furtive&#39;, &#39;cautious&#39;, &#39;happy&#39;, &#39;adventurous&#39;],
    color: [&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;],
    animal: [&#39;dog&#39;, &#39;cat&#39;, &#39;rabbit&#39;, &#39;rooster&#39;, &#39;gazelle&#39;, &#39;aardvark&#39;, &#39;sea lion&#39;]
}
</code></pre>
<hr>
<h4 id="metacharacters">Metacharacters</h4>
<p>Use a backslash to escape <a href="https://en.wikipedia.org/wiki/Metacharacter#:~:text=A%20metacharacter%20is%20a%20character,regular%20expression%20(regex)%20engine." target="_blank">metacharacters</a>. To match <code>(123)</code> not <code>123</code></p>
<pre><code class="language-bash">\(123\)
</code></pre>
<p>Change line 1 &gt; line 2</p>
<pre><code class="language-bash">&lt;p&gt;[slides](../slides/data-cleaning.html)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;../slides/data-cleaning.html&quot;&gt;slides&lt;/a&gt;&lt;/p&gt;
</code></pre>
<p>With this find / replace</p>
<pre><code class="language-bash">&lt;p&gt;\[slides\]\(../slides/(.*)\)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;../slides/$1&quot;&gt;slides&lt;/a&gt;&lt;/p&gt;
</code></pre>
<hr>
<h2 id="other-issues">Other issues</h2>
<p>Other issues that aren&#39;t covered here:</p>
<ul>
<li>Spelling and grammar issues, which make searching, find / replace, and any other actions that rely on string identification difficult.</li>
</ul>
<hr>
<h2 id="keep-practicing">Keep practicing</h2>
<ul>
<li>Learn Computing: Data Basics <a href="../slides/data-basics.html">slides</a> | <a href="../topics/data-basics.md">markdown</a></li>
<li>Learn Computing: Data Types <a href="../slides/data-types.html">slides</a> | <a href="../topics/data-types.md">markdown</a></li>
<li>Learn Computing: Data Cleaning <a href="../slides/data-cleaning.html">slides</a> | <a href="../topics/data-cleaning.md">markdown</a></li>
<li>Learn Computing: APIs <a href="../slides/data-apis.html">slides</a> | <a href="../topics/data-apis.md">markdown</a></li>
</ul>
<hr>
<h2 id="references">References</h2>
<ul>
<li>Towards Data Science <a href="https://towardsdatascience.com/the-ultimate-guide-to-data-cleaning-3969843991d4">The Ultimate Guide to Data Cleaning</a></li>
<li>Tableau <a href="https://www.tableau.com/learn/articles/what-is-data-cleaning">Guide To Data Cleaning: Definition, Benefits, Components, And How To Clean Your Data</a></li>
</ul>

        </div>
    </div>
</div>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

</body>
</html>
